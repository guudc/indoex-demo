{"version":3,"sources":["pages/Airdrop/resetPassword.tsx"],"names":["FormContainer","styled","div","Form","form","theme","bg1","bg2","FormTitle","h2","FormGroup","Label","label","Input","input","props","error","SubmitButton","button","ErrorMessage","p","SuccessMessage","ResetPassword","history","useState","email","code","password","confirmPassword","userInput","setUserInput","emailError","codeError","passwordError","confirmPasswordError","errors","setErrors","success","setSuccess","setError","processing","setProcessing","userData","user","isAuthenticated","handleChange","event","target","name","value","validate","changePassword","a","axios","post","process","data","status","message","console","log","handleSubmit","preventDefault","strongRegexHigherCase","RegExp","strongRegexLowerCase","strongRegexNumber","strongRegexSpecialCharacter","length","test","verified","to","onSubmit","htmlFor","type","placeholder","onChange","disabled"],"mappings":"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","file":"static/js/36.2e814bdd.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport Loader from 'src/components/Loader'\nimport { Redirect } from 'react-router-dom';\nimport { isAuthenticated } from '../../helper/auth'\n\n// Styled-Components\nconst FormContainer = styled.div`\n\twidth: 100%;\n\toverflow: visible;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin: auto;\n`\n\nconst Form = styled.form`\n\twidth: calc(100% - 40px);\n\tmax-width: 400px;\n\tbackground-color: ${({ theme }) => theme.bg1};\n\tborder: 1px solid ${({ theme }) => theme.bg2};\n\tborder-radius: 8px;\n\tpadding: 1rem;\n`\n\nconst FormTitle = styled.h2`\n\tfont-size: 1.3rem;\n\ttext-align: center;\n\tmargin-bottom: 1rem;\n`\n\nconst FormGroup = styled.div`\n\tmargin-bottom: 1.5rem;\n`\n\nconst Label = styled.label`\n\tfont-size: 1rem;\n`\n\nconst Input = styled.input<{ error: string }>`\n\tbackground: none;\n\tdisplay: block;\n\twidth: 100%;\n\tpadding: 0.5rem;\n\tfont-size: 1rem;\n\tborder: 1px solid #eaeaea;\n\tcolor: #ffffff;\n\tborder-radius: 5px;\n\tmargin-bottom: 0.5rem;\n\t&:focus {\n\t\toutline: none;\n\t\tcolor: #ffffff;\n\t\tborder-color: #eaeaea;\n\t\tborder-width: 2px;\n\t}\n\t${(props) =>\n\t\tprops.error &&\n\t\t`\n    border-color: #f44336;\n  `};\n`\n\nconst SubmitButton = styled.button`\n\twidth: 100%;\n\tcursor: pointer;\n\ttransition: all 0.5s ease;\n\tbackground-color: #7eb946;\n\tcolor: #ffffff;\n\tfont-size: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: none;\n\tborder-radius: 5px;\n\t&:hover {\n\t\tbackground-color: #212121;\n\t\tcolor: #eaeaea;\n\t}\n`\n\nconst ErrorMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #f44336;\n`\n\nconst SuccessMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #4caf50;\n`\n\nconst ResetPassword = ({ history }) => {\n\t// State to hold user input\n\tconst [userInput, setUserInput] = useState({\n\t\temail: '',\n\t\tcode: '',\n\t\tpassword: '',\n\t\tconfirmPassword: ''\n\t})\n\t// State to hold errors\n\tconst [errors, setErrors] = useState({\n\t\temailError: '',\n\t\tcodeError: '',\n\t\tpasswordError: '',\n\t\tconfirmPasswordError: ''\n\t})\n\t// State to hold success message\n\tconst [success, setSuccess] = useState('')\n\tconst [error, setError] = useState('')\n\tconst [processing, setProcessing] = useState(false)\n\tconst [userData, setUserData] = useState(null);\n\tconst { user } = isAuthenticated()\n\n\t// useEffect(() => {\n\t// \tconst fetchUser = async () => {\n\t// \t  const response = await \n\t// \t  axios.get(`${process.env.REACT_APP_BACKEND_API}/me/${user._id}`,\n\t// \t\t{\n\t// \t\theaders: {\n\t// \t\t\tAuthorization: `Bearer ${user.token}`,\n\t// \t\t},\n\t// \t\t}\n\t// \t\t);\n\t// \t  setUserData(response.data.user);\n\t// \t};\n\t// \tfetchUser();\n\t//   }, []);\n\n\t// Function to handle user input\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target\n\t\tsetUserInput({\n\t\t\t...userInput,\n\t\t\t[name]: value\n\t\t})\n\t}\n\n\t// Function to check for errors\n\tconst validate = () => {\n\t\tlet emailError = ''\n\t\tlet codeError = ''\n\t\tlet passwordError = ''\n\t\tlet confirmPasswordError = ''\n\n\t\t// Check for empty email\n\t\tif (!userInput.email) {\n\t\t\temailError = 'Email cannot be empty'\n\t\t}\n\t\t// Check for empty code\n\t\tif (!userInput.code) {\n\t\t\tcodeError = 'Code cannot be empty'\n\t\t}\n\t\t// Check for empty password\n\t\tif (!userInput.password) {\n\t\t\tpasswordError = 'Password cannot be empty'\n\t\t}\n\t\t// Check for empty confirm password\n\t\tif (!userInput.confirmPassword) {\n\t\t\tconfirmPasswordError = 'Confirm password cannot be empty'\n\t\t}\n\t\t// Check if passwords match\n\t\tif (userInput.password !== userInput.confirmPassword) {\n\t\t\tconfirmPasswordError = 'Passwords must match'\n\t\t}\n\t\t// Set errors accordingly\n\t\tif (emailError || passwordError || confirmPasswordError || codeError) {\n\t\t\tsetErrors({\n\t\t\t\temailError,\n\t\t\t\tcodeError,\n\t\t\t\tpasswordError,\n\t\t\t\tconfirmPasswordError\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\tconst changePassword = async () => {\n\t\ttry {\n\t\t\tconst { data } = await axios.post(`${process.env.REACT_APP_BACKEND_API}/changePassword`, {\n\n\t\t\t\temail: userInput.email,\n\t\t\t\tpassword: userInput.password\n\t\t\t})\n\t\t\tif (data.status == false) {\n\t\t\t\tsetError(data.message)\n\t\t\t} else {\n\t\t\t\tsetSuccess(data.message)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tsetError(error)\n\t\t}\n\t}\n\n\t// Function to handle form submission\n\tconst handleSubmit = async (event) => {\n\t\tevent.preventDefault()\n\t\tsetProcessing(true)\n\t\tconst strongRegexHigherCase = new RegExp('^(?=.*[A-Z])')\n\t\tconst strongRegexLowerCase = new RegExp('^(?=.*[a-z])')\n\t\tconst strongRegexNumber = new RegExp('^(?=.*[0-9])')\n\t\tconst strongRegexSpecialCharacter = /^(.*\\W).*$/\n\n\t\tif (userInput.password.length < 8) {\n\t\t\tsetError('Password must be atleast 8 characters.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (userInput.password.length > 40) {\n\t\t\tsetError('Password must be maximum of 40 characters.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\n\t\tif (!strongRegexHigherCase.test(userInput.password)) {\n\t\t\tsetError('Password must contain an uppercase.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexLowerCase.test(userInput.password)) {\n\t\t\tsetError('Password must contain a lowercase.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexNumber.test(userInput.password)) {\n\t\t\tsetError('Password must contain a number.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexSpecialCharacter.test(userInput.password)) {\n\t\t\tsetError('Password must contain a special character.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t\treturn\n\t\t}\n\t\ttry {\n\t\t\tconst isValid = validate()\n\t\t\tif (isValid) {\n\t\t\t\tsetErrors({\n\t\t\t\t\temailError: '',\n\t\t\t\t\tcodeError: '',\n\t\t\t\t\tpasswordError: '',\n\t\t\t\t\tconfirmPasswordError: ''\n\t\t\t\t})\n\t\t\t\tconst { data } = await axios.post(`${process.env.REACT_APP_BACKEND_API}/validateResetCode`, {\n\n\t\t\t\t\tcode: userInput.code,\n\t\t\t\t\temail: userInput.email\n\t\t\t\t})\n\t\t\t\tif (data.status == false) {\n\t\t\t\t\tsetError(data.message)\n\t\t\t\t\tsetSuccess('')\n\t\t\t\t\tsetProcessing(false)\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\t\t\t\t\t// Clear state\n\t\t\t\t\tsetUserInput({\n\t\t\t\t\t\temail: '',\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tcode: '',\n\t\t\t\t\t\tconfirmPassword: ''\n\t\t\t\t\t})\n\t\t\t\t\tchangePassword()\n\t\t\t\t\tsetProcessing(false)\n\t\t\t\t\tsetSuccess(data.message)\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetProcessing(false)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tsetSuccess('')\n\t\t\tsetError('Error resetting your password. Please try again later')\n\t\t\tsetProcessing(false)\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{user && userData && !userData.verified ? <Redirect to=\"/verify-email\" /> : null}\n\n\t\t\t<FormContainer>\n\t\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t\t<FormTitle>Reset Password</FormTitle>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"email\">Code</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tname=\"code\"\n\t\t\t\t\t\t\tplaceholder=\"Provide your email verifiction code\"\n\t\t\t\t\t\t\tvalue={userInput.code}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.codeError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.codeError ? <ErrorMessage>{errors.codeError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"email\">Email</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tvalue={userInput.email}\n\t\t\t\t\t\t\tplaceholder=\"Enter your email address\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.emailError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.emailError ? <ErrorMessage>{errors.emailError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"password\">Password</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={userInput.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.passwordError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.passwordError ? <ErrorMessage>{errors.passwordError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\t\t\tvalue={userInput.confirmPassword}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.confirmPasswordError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.confirmPasswordError ? <ErrorMessage>{errors.confirmPasswordError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t{processing ? (\n\t\t\t\t\t\t\t<SubmitButton disabled type=\"submit\">\n\t\t\t\t\t\t\t\tSubmitting\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Submit</SubmitButton>\n\t\t\t\t\t\t)}{' '}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t{success ? <SuccessMessage>{success}</SuccessMessage> : null}\n\t\t\t\t\t{error ? <ErrorMessage>{error}</ErrorMessage> : null}\n\t\t\t\t</Form>\n\t\t\t</FormContainer>\n\t\t</>\n\t)\n}\n\nexport default ResetPassword\n"],"sourceRoot":""}