(this["webpackJsonpdxswap-dapp"]=this["webpackJsonpdxswap-dapp"]||[]).push([[18],{1236:function(e,t){var n=[];n[80001]="0x02214F1Bf737d7269F36A28eEA34d3b20E3149dc",n[137]="0x4d9883E637708b662f96e3733aEf82BA4Ac0eE30",t.chains=n},1237:function(e,t){t.token=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],t.vote=[{inputs:[{internalType:"string",name:"_proposalId",type:"string"},{internalType:"uint256",name:"_type",type:"uint256"},{internalType:"uint256",name:"_endDate",type:"uint256"}],name:"vote",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_proposalId",type:"string"},{internalType:"uint256",name:"_endDate",type:"uint256"}],name:"getProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_proposalId",type:"string"},{internalType:"address",name:"_voter",type:"address"},{internalType:"uint256",name:"_endDate",type:"uint256"}],name:"getVoterProposal",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]},1249:function(e,t,n){"use strict";n.r(t);var a,o=n(2),l=n.n(o),s=n(17),i=n(0),r=n.n(i),c=n(22),p=n(718),d=n.n(p),u=(n(719),n(1236)),m=n.n(u),y=n(1237),g=n.n(y),f=n(307),v=n(199),b=n.n(v),_=n(38),h=n(166),E=n(671),T="".concat("http://localhost:5000","/"),w="",x=0;function N(){return(N=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T+"getproposal",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((function(e){return e.json().then((function(e){return e}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(s.a)(l.a.mark((function e(t,n){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=m.a.chains[n],s=new f.ethers.Contract(o,g.a.vote,a),e.abrupt("return",s.getProposal(t,x).then((function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(s.a)(l.a.mark((function e(t,n,o){var s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.a.chains[o],i=new f.ethers.Contract(s,g.a.vote,a),e.abrupt("return",i.getVoterProposal(t,n,x).then((function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return B.apply(this,arguments)}function B(){return(B=Object(s.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,key:n},e.abrupt("return",fetch(T+"forceremoveproposal",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json().then((function(e){return e}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){var e=document.getElementById("_yes_vote_button"),t=document.getElementById("_no_vote_button"),n=document.getElementById("proposal-msg-area");function a(a){null!=e&&null!=t&&null!=n&&(e.disabled=!1,t.disabled=!1,e.innerHTML="Yes",n.style.display="flex",n.innerHTML=a)}null!=e&&null!=t&&null!=n&&(e.innerHTML="Voting..",e.disabled=!0,t.disabled=!0,n.style.display="none",H(1,137).then((function(o){o.hash&&o.wait().then((function(o){e.disabled=!1,t.disabled=!1,1==o.status?(a("Voted successfully"),n.className="proposal-msg-area proposal-msg-area-success",window.location.reload()):(a("Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail")})).catch((function(e){e.data=e.data||{message:"Transaction failed<br>Try again later"},a(e.data.message||e.message||"Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail"}))})).catch((function(e){e.data=e.data||{message:"Transaction failed<br>Try again later"},a(e.data.message||e.message||"Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail"})))},O=function(){var e=document.getElementById("_yes_vote_button"),t=document.getElementById("_no_vote_button"),n=document.getElementById("proposal-msg-area");function a(a){null!=e&&null!=t&&null!=n&&(e.disabled=!1,t.disabled=!1,t.innerHTML="No",n.style.display="flex",n.innerHTML=a)}null!=e&&null!=t&&null!=n&&(t.innerHTML="Voting..",t.disabled=!0,e.disabled=!0,n.style.display="none",H(0,137).then((function(o){o.hash&&o.wait().then((function(o){e.disabled=!1,t.disabled=!1,1==o.status?(a("Voted successfully"),n.className="proposal-msg-area proposal-msg-area-success",window.location.reload()):(a("Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail")})).catch((function(e){e.data=e.data||{message:"Transaction failed<br>Try again later"},a(e.data.message||e.message||"Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail"}))})).catch((function(e){e.data=e.data||{message:"Transaction failed<br>Try again later"},a(e.data.message||e.message||"Transaction failed"),n.className="proposal-msg-area proposal-msg-area-fail"})))},H=function(e,t){var n=m.a.chains[t],o=a.getSigner(),l=new f.ethers.Contract(n,g.a.vote,o);return console.log(x),l.vote(w,e,x)};Object(h.f)("prposal");t.default=function(){var e=Object(c.a)(),t=e.account,n=e.chainId,o=e.library,i=Object(_.k)();a=o;var p=function e(a){137==n&&function(e,t){return I.apply(this,arguments)}(a.id,n).then((function(o){(function(e,t,n){return k.apply(this,arguments)})(a.id,t,n).then((function(e){!function(e,t,n,a){var o=setInterval((function(){console.log(e);var l=document.getElementById("_voting_results"),s=document.getElementById("_voting_result");if(null!=l&&null!=s){clearInterval(o),s.style.display="block","active"==n.proposal.status?l.style.display="none":"settled"==n.proposal.status?(l.style.display="",l.innerHTML="Completed",l.style.backgroundColor="limegreen"):"cancelled"==n.proposal.status?(l.style.display="",l.innerHTML="Rejected",l.style.backgroundColor="red"):"undecided"==n.proposal.status&&(l.style.display="",l.innerHTML="Undecided",l.style.backgroundColor="grey");var i=document.getElementById("_yes_vote"),r=document.getElementById("_yes_vote_bar");if(null!=i&&null!=r){var c=100/(1*e[0]+1*e[1])*e[0];isNaN(c)&&(c=0),i.innerHTML=e[0]+" ("+c+"%)",r.style.width=c+"%"}var p=document.getElementById("_no_vote"),d=document.getElementById("_no_vote_bar");if(null!=p&&null!=d){var u=100/(1*e[0]+1*e[1])*e[1];isNaN(u)&&(u=0),p.innerHTML=e[1]+" ("+u+"%)",d.style.width=u+"%"}var m=document.getElementById("_yes_vote_button"),y=document.getElementById("_no_vote_button"),g=document.getElementById("hasVoted");if(null!=m&&null!=y){if(1==t?(m.style.display="none",y.style.display="none",g.style.display="flex"):(m.style.display="",y.style.display="",g.style.display="none"),"active"==n.proposal.status){var f=document.getElementById("voting_area");null!=f&&(f.style.display="block")}if(n.proposal.wallet!=a){var v=document.getElementById("submit-proposal-btn"),b=document.getElementById("_proposal_info");null!=v&&null!=b&&(v.style.display="none",b.style.display="none")}else{var _=document.getElementById("submit-proposal-btn"),h=document.getElementById("_proposal_info");null!=_&&null!=h&&(_.style.display="",h.style.display="")}}}}),1e3)}(o,e,a,t)})).catch((function(t){e(a)}))})).catch((function(t){e(a)}))},u=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(null===(t=window.ethereum)||void 0===t?void 0:t.request)){e.next=17;break}return e.prev=1,e.next=4,null===(n=window.ethereum)||void 0===n?void 0:n.request({method:"wallet_switchEthereumChain",params:[{chainId:b.a.utils.toHex(137)}]});case 4:e.next=17;break;case 6:if(e.prev=6,e.t0=e.catch(1),4902!==(null===(a=e.t0)||void 0===a?void 0:a.code)){e.next=17;break}return e.prev=9,e.next=12,null===(o=window.ethereum)||void 0===o?void 0:o.request({method:"wallet_addEthereumChain",params:[{chainId:b.a.utils.toHex(137),chainName:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com"],rpcUrls:["https://poly-mainnet.gateway.pokt.network/v1/lb/61141e8259501900341bb3e2"]}]});case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(l.a.mark((function e(){var n,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.getElementById("submit-proposal-btn"),a=document.getElementById("proposal-msg-area"),null==n||null==a){e.next=10;break}return n.disabled=!0,n.innerHTML="Removing...",a.innerHTML="",e.next=8,Object(h.e)(t);case 8:null!=(o=e.sent)?M(w,o).then((function(e){console.log(e),n.disabled=!1,n.innerHTML="Remove Proposal",a.style.display="flex","error"===e.status||"false"===e.status?(a.innerHTML=e.msg,a.className="proposal-msg-area proposal-msg-area-fail"):!0===e.status&&(a.innerHTML="Removed Successfully",a.className="proposal-msg-area proposal-msg-area-success",window.location.href="#/vote")})).catch((function(e){n.disabled=!1,n.innerHTML="Remove Proposal",a.style.display="flex",a.innerHTML="Network error",a.className="proposal-msg-area proposal-msg-area-fail"})):(n.disabled=!1,n.innerHTML="Remove Proposal",Object(E.c)({status:"error",msg:"Please authorize this transaction",duration:3e3}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"create-proposal"},r.a.createElement("div",{className:"bg-image"}),r.a.createElement("div",{className:"dxvoting"},r.a.createElement("div",{id:"_proposals",className:"votingContainer"},r.a.createElement("div",{id:"_short_detail",className:"voting",style:{display:"none"}},r.a.createElement("div",{className:"voting-content-header"},r.a.createElement("h3",{className:"dxvoting-title"},"Proposal"),r.a.createElement("p",{className:"voting-content"},"Only those with IND token can vote on a proposal. You can only vote once on a proposal and votes are irreversible.")),r.a.createElement("div",{className:"voting-proposal-box",style:{paddingTop:"15px"}},r.a.createElement("div",{id:"_proposal",className:"title_b"},"0x...."),r.a.createElement("div",{className:"tiny-head"},"Proposer"),r.a.createElement("div",{id:"_start",className:"title_b"},"9th Dec. 2022"),r.a.createElement("div",{className:"tiny-head"},"Start Date"),r.a.createElement("div",{id:"_end",className:"title_b"},"9th Dec. 2022"),r.a.createElement("div",{className:"tiny-head"},"End Date"))),r.a.createElement("div",{id:"_voting_result",className:"voting",style:{display:"none"}},r.a.createElement("div",{className:"voting-proposal-box top_head",style:{paddingTop:"5px"}},r.a.createElement("div",{className:"voting-proposal"},r.a.createElement("p",{className:"tiny-head"},"Results"),r.a.createElement("div",{id:"_voting_results",style:{backgroundColor:"limegreen"}}))),r.a.createElement("div",{className:"result"},r.a.createElement("div",null,r.a.createElement("div",{className:"result_stat"},r.a.createElement("span",{style:{color:"limegreen",fontWeight:"bold"}},"Yes"),r.a.createElement("span",{id:"_yes_vote"},"45 Votes (56%)")),r.a.createElement("div",{className:"result_bar"},r.a.createElement("div",{id:"_yes_vote_bar",style:{backgroundColor:"limegreen"}}))),r.a.createElement("div",{style:{marginTop:"30px"}},r.a.createElement("div",{className:"result_stat"},r.a.createElement("span",{style:{color:"red",fontWeight:"bold"}},"No"),r.a.createElement("span",{id:"_no_vote"},"45 Votes (26%)")),r.a.createElement("div",{className:"result_bar"},r.a.createElement("div",{id:"_no_vote_bar",style:{backgroundColor:"red"}}))))),r.a.createElement("div",{id:"_long_detail",className:"voting",style:{display:"none"}},r.a.createElement("div",{className:"voting-proposal-box",style:{paddingTop:"15px"}},r.a.createElement("div",{className:"voting-propo sal"},r.a.createElement("p",{className:"tiny-head"},"Proposed Action"),r.a.createElement("div",{className:"proposal-views",id:"_action",style:{textTransform:"capitalize"}},"Action")),r.a.createElement("div",{className:"proposal-content"},r.a.createElement("p",{className:"tiny-head"},"Title"),r.a.createElement("div",{className:"proposal-views",id:"_title"},"Title"),r.a.createElement("div",{id:"_body",style:{marginTop:"20px"},className:"proposal-content-placeholder"},r.a.createElement("p",null," -- Proposal Format -- "))))),r.a.createElement("div",{id:"voting_area",className:"voting",style:{display:"none"}},r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement("div",{className:"proposal-vote-options"},r.a.createElement("button",{onClick:j,id:"_yes_vote_button"},"Yes"),r.a.createElement("button",{onClick:O,id:"_no_vote_button"},"No"),r.a.createElement("div",{id:"hasVoted",className:"proposal-voted",style:{display:"none"}},"Voted"))),r.a.createElement("div",{id:"proposal-msg-area",className:"proposal-msg-area proposal-msg-area-fail"}),r.a.createElement("button",{onClick:m,id:"submit-proposal-btn",className:"submit-proposal-btn"},"Remove"),r.a.createElement("p",{id:"_proposal_info",className:"dont-have-2-point-4M",style:{display:"none"}}))),r.a.createElement("div",{id:"voting_warning",className:"votingContainer",style:{display:"none"}},r.a.createElement("div",{className:"voting"},r.a.createElement("div",{className:"voting-content-header",style:{background:"none"}},r.a.createElement("h3",{className:"dxvoting-title"},"Voting"),r.a.createElement("p",{className:"voting-content",style:{textAlign:"center"}},"All voting can only be done on the Polygon Network.")),r.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},r.a.createElement("img",{src:d.a,style:{maxWidth:"250px",maxHeight:"250px",marginBottom:"30px",marginTop:"20px"}}),t?r.a.createElement("button",{onClick:u,className:"voting voting_warning"},"Switch network to Polygon"):r.a.createElement("button",{onClick:i,className:"voting voting_warning"},"Connect Wallet"))))),r.a.createElement(E.a,null),function e(){var a=function(e,t){t||(t=window.location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==n?null:n[1]}("id",window.location.href);""!=a&&null!=a&&(w=a,function(e){return N.apply(this,arguments)}(a).then((function(e){if(!0===e.status){console.log(e),function(e){var t=setInterval((function(){var n=document.getElementById("_proposal");if(null!=n){clearInterval(t),n.innerHTML=e.proposal.wallet;var a=document.getElementById("_start"),o=document.getElementById("_end");if(null!=a&&null!=o){a.innerHTML=new Date(e.proposal.created).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),o.innerHTML=new Date(e.proposal.end).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"});var l=document.getElementById("_short_detail");null!=l&&(l.style.display="block")}var s=document.getElementById("_action");if(null!=s){s.innerHTML=e.proposal.action+" Feature";var i=document.getElementById("_title");if(null!=i){i.innerHTML=e.proposal.title;var r=document.getElementById("_body");if(null!=r){r.innerHTML=e.proposal.summary.replace(/\n/g,"<br>");var c=document.getElementById("_long_detail");null!=c&&(c.style.display="block")}}}}}),1e3)}(e),x=1*new Date(e.proposal.end).getTime()/1e3,isNaN(x)&&(x=0),p(e);var a=document.getElementById("voting_warning"),o=document.getElementById("_proposals");null!=a&&null!=o&&(null==t||137!=n&&null!=n?(a.style.display="block",o.style.display="none"):(a.style.display="none",o.style.display=""))}else alert("Proposal does not exist"),window.location.href="#/vote"})).catch((function(t){setTimeout((function(){e()}),1e3)})))}())}},671:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return _}));var a,o,l,s,i=n(5),r=n(0),c=n.n(r),p=n(7),d=n(166),u=(Math.random(),p.default.div(a||(a=Object(i.a)(["\n   position:fixed;\n   top:0px;left:0px;\n   width:100vw;\n   height:1px;\n   display:none;\n   align-items:flex-start;\n   z-index:400;\n"])))),m=p.default.div(o||(o=Object(i.a)(["\n   padding:15px 20px;\n   background-color: ",";\n   min-height:40px;\n   color:",";\n   font-size:15px;\n   margin-left:auto;margin-right:80px;\n   margin-top:120px;\n   box-shadow:0 0 6px 3px rgba(0,0,0,.1);\n   border-radius:10px;\n   display:flex;\n   align-items:center;\n   max-width:350px;\n"])),(function(e){return e.theme.dark1}),(function(e){return e.theme.text1})),y=p.default.span(l||(l=Object(i.a)(["\n    margin-left:10px;\n    margin-right:10px;\n"]))),g=function(e){if(e){null!=Object(d.a)("modal_info_msg")&&(Object(d.a)("modal_info_msg").style.display="flex");try{clearTimeout(s)}catch(t){}}else null!=Object(d.a)("modal_info_msg")&&(Object(d.a)("modal_info_msg").style.display="none")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;try{clearTimeout(s)}catch(t){}s=setTimeout((function(){Object(d.a)("modal_info_msg").style.display="none"}),e)},v=function(e){null!=Object(d.a)("modal_info_msg_body")&&(Object(d.a)("modal_info_msg_body").innerHTML=e)},b=function(e){g(!0),v(e.msg||""),_(e.status||""),f(e.duration||3e3)},_=function(e){var t=Object(d.a)("modal_info_msg_status");"error"==e?null!=t&&(Object(d.a)("modal_info_msg_status").className="fas fa-times",t.style.color="red"):"good"==e?null!=t&&(Object(d.a)("modal_info_msg_status").className="fas fa-check-circle",t.style.color="limegreen"):null!=t&&(Object(d.a)("modal_info_msg_status").className="fas fa-spinner fa-spin",t.style.color="")},h=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,{id:"modal_info_msg"},c.a.createElement(m,null,c.a.createElement("span",{id:"modal_info_msg_status",className:"fas fa-spinner fa-spin"}),c.a.createElement(y,{id:"modal_info_msg_body"},"Loading"))))}},718:function(e,t,n){e.exports=n.p+"static/media/wrong.a5eb2125.png"},719:function(e,t,n){}}]);
//# sourceMappingURL=18.10898028.chunk.js.map