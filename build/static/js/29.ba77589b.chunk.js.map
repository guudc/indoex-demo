{"version":3,"sources":["pages/Admin/dashboard.tsx","functions/user.js"],"names":["DashboardContainer","styled","div","SubmitButton","button","Title","h1","Dashboard","history","useState","user","setUser","token","isAuthenticated","useEffect","getUserDetails","then","data","console","log","message","alert","signout","push","setTimeout","window","location","reload","verified","to","role","style","width","type","cursor","onClick","sendVerification","fetch","process","method","headers","Accept","Authorization","body","JSON","stringify","response","json","catch","err","activate","submitAirdrop","airdrop","updateMyAirdrop","id","deleteMyAirdrop","getMyAirdrops","updatePassword","password"],"mappings":"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","file":"static/js/29.ba77589b.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { isAuthenticated } from '../../helper/auth'\nimport { signout } from 'src/helper/auth'\nimport { getUserDetails } from 'src/functions/user'\n\ninterface Props {\n\ttitle: string\n\tchildren: React.ReactNode\n}\n\nconst DashboardContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 20px;\n\t@media screen and (max-width: 600px) {\n\t\twidth: 100%;\n\t}\n`\n\nconst SubmitButton = styled.button`\n\twidth: 100%;\n\tcursor: pointer;\n\ttransition: all 0.5s ease;\n\tbackground-color: #7eb946;\n\tcolor: #212121;\n\tfont-size: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: none;\n\tborder-radius: 5px;\n\t&:hover {\n\t\tbackground-color: #212121;\n\t\tcolor: #eaeaea;\n\t}\n`\n\nconst Title = styled.h1`\n\tfont-size: 20px;\n\tmargin-bottom: 20px;\n\t@media screen and (max-width: 600px) {\n\t\twidth: 100%;\n\t}\n`\n\nconst Dashboard: React.FC<Props> = ({ history }: any) => {\n\tconst [user, setUser] = useState(null)\n\tlet { token } = isAuthenticated()\n\tconst init = () => {\n\t\tgetUserDetails(token).then(data => {\n\t\t\tconsole.log('data: ', data)\n\t\t\tif (data.message === 'Invalid Authentification') {\n\t\t\t\talert('Session expired,  Please login')\n\t\t\t\tsignout(() => {\n\t\t\t\t\thistory.push('/')\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tsetUser(data.user)\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\tinit()\n\t}, [])\n\treturn (\n\t\t<>\n\t\t\t{user && !user.verified ? <Redirect to=\"/verify-email\" /> : null}\n\n\t\t\t{user && user.role !== 'admin' ? (\n\t\t\t\t<Redirect to=\"/dashboard\" />\n\t\t\t) : (\n\t\t\t\t<DashboardContainer>\n\t\t\t\t\t<Title>Welcome to admin dashboard</Title>\n\t\t\t\t\t<Link to=\"/submit-airdrop\" style={{ width: '100%' }}>\n\t\t\t\t\t\t<SubmitButton type=\"submit\">Submit Airdrop</SubmitButton>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Link to=\"/admin/airdrops\" style={{ width: '100%' }}>\n\t\t\t\t\t\t<SubmitButton type=\"submit\">View Airdrops</SubmitButton>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Link to=\"/admin/users\" style={{ width: '100%' }}>\n\t\t\t\t\t\t<SubmitButton type=\"button\">View Users</SubmitButton>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Link to=\"/change/password\" style={{ width: '100%' }}>\n\t\t\t\t\t\t<SubmitButton type=\"submit\">Change Password</SubmitButton>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<a\n\t\t\t\t\t\tstyle={{ cursor: 'pointer', width: '100%' }}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsignout(() => {\n\t\t\t\t\t\t\t\thistory.push('/')\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SubmitButton type=\"submit\">Logout</SubmitButton>\n\t\t\t\t\t</a>\n\t\t\t\t\t<br />\n\t\t\t\t</DashboardContainer>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default Dashboard\n","export const sendVerification = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/sendVerification`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const activate = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/activate`, {\n\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const submitAirdrop = (token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/submit-airdrop`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const updateMyAirdrop = (id, token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/update/airdrop/${id}`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const deleteMyAirdrop = (id, token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/delete/airdrop/${id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getMyAirdrops = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/my-airdrops`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getUserDetails = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/me`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const updatePassword = (token, password) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/updatePassword`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(password)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n"],"sourceRoot":""}