(this["webpackJsonpdxswap-dapp"]=this["webpackJsonpdxswap-dapp"]||[]).push([[38],{1266:function(e,t,a){"use strict";a.r(t);var n,i,o,l,s,c,r,d,u,m,k,b,_,f,p,v=a(18),O=a(5),j=a(0),h=a.n(j),y=(a(696),a(36)),g=a(7),E=a(38),w=a(22),T=a(166),I=a(307),N=a(199),L=a.n(N),M=a(747),S=a.n(M),H=a(748),C=a.n(H),x=a(671),A=a(1),B="0",W=!1,q=0,D=!1,P=[],U=function(e){var t=Object(T.a)(e);return null!=t?t.value:""},R=function(){var e=Object(w.a)(),t=e.account,a=e.chainId,c=e.library;o=c,l=t,s=a;var r=Object(E.k)();Object(T.i)("stake_edit_lock",(function(e){W="locked"==e.toLowerCase()}));var d=function(){var e=Object(T.a)("stake_save");null!=e&&(e.style.display="none",i=null,n=0,B=0,P.length>0&&D&&(D=!1,P.forEach((function(e){e()})),D=!1))};return Object(T.h)("stake_save",(function(){null!=i&&i.owner!=l&&(Object(T.a)("stake_save").style.display="none")})),h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{id:"stake_save",className:"stake_overlay",style:{display:"none"}},h.a.createElement("div",{className:"stake_modal topGravity"},h.a.createElement("div",{onClick:d,className:"stake_cancel"},h.a.createElement("span",{className:"fas fa-times"})),h.a.createElement("span",{className:"",style:{margin:"15px",fontSize:"18px"}},"Edit Stake Pool"),h.a.createElement("div",{className:"stake_modal_display"},h.a.createElement("section",{className:"stake_option_section"},h.a.createElement("span",{id:"stake_edit_info",className:"stake_token_font span"},"Add liquidity in BNB"),h.a.createElement("div",null,h.a.createElement("input",{id:"stake_edit_liquid_input",type:"number",className:"input",placeholder:"amount"})),h.a.createElement("span",{id:"stake_edit_balance",className:"msg"},"Balance: ")),h.a.createElement("section",{className:"stake_option_section"},h.a.createElement("span",{className:"stake_token_font span"},"Lock staking"),h.a.createElement("div",null,h.a.createElement("div",{id:"stake_edit_lock",className:"stake_toggle",style:{marginLeft:"10px"}},h.a.createElement("div",{className:"stake_toggle_select"},"locked"),h.a.createElement("div",null,"Unlocked")))),h.a.createElement("section",{className:"stake_option_section"},h.a.createElement("span",{className:"stake_token_font span"},"Extend duration in days"),h.a.createElement("div",null,h.a.createElement("input",{id:"stake_edit_end_input",type:"number",className:"input",placeholder:"set duration"}))),h.a.createElement("section",{className:"stake_option_section",style:{border:"0px"}},t?h.a.createElement(y.f,{onClick:function(){var e=(B=U("stake_edit_liquid_input"),q=U("stake_edit_end_input"),1*B>1*n?[!1,"Insufficient balance to provide for the desired liquidity."]:1*B<0?[!1,"Liquidity amount cannot be negative"]:1*q<0?[!1,"Duration value cannot be negative"]:[!0]),t=Object(T.a)("stake_edit_button");function a(e){Object(x.e)("error"),Object(x.d)(Object(T.j)(e)),Object(x.b)(),null!=t&&(t.disabled=!1),t.innerHTML="Save"}e[0]?(t.disabled=!0,t.innerHTML="...",Object(x.f)(!0),Object(x.d)("Transacting"),Object(x.e)(""),t.disabled=!0,function(){var e=C.a.chains[s];if(null!=e){var t=e.stake,a=o.getSigner(),n=new I.ethers.Contract(t,S.a.stake,a),l=Object(T.k)(B,i.rewardTokenInfo.decimal);return q*=1,(i.rewardTokenInfo.tokenAddress!=A.ZERO_ADDRESS?n.modifyStakePool(i.poolId,L.a.utils.toWei(l+"","wei"),W,q):n.modifyStakePool(i.poolId,L.a.utils.toWei(l+"","wei"),W,q,{value:L.a.utils.toWei(l+"","wei")})).then((function(e){return e}))}return!1}().then((function(e){e.hash&&e.wait().then((function(e){t.disabled=!1,Object(x.b)(3e3),t.innerHTML="Save",1==e.status?(Object(x.d)("Saved successfull"),Object(x.e)("good"),D=!0,d()):(Object(x.e)("error"),Object(x.d)("Transaction failed"))})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))):(Object(x.f)(!0),Object(x.e)("error"),Object(x.d)(e[1]),Object(x.b)(4e3))},id:"stake_edit_button"},"Save"):h.a.createElement(y.f,{onClick:r},"Connect Wallet"))))),h.a.createElement(x.a,null))},z=a(66),J=a(33),F="stake",G="",Z={},K=0,Q="",V=g.default.div(c||(c=Object(O.a)(["\n  width: 100%;\n  padding: 10px 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background-color: ",";\n  margin-top: 20px;\n  border-radius: 8px;\n"])),(function(e){return e.theme.bg1And2})),X=g.default.div(r||(r=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n\n  & p {\n    margin: 0;\n    font-size: 0.85rem;\n    margin-bottom: 7px;\n    color: ","\n  }\n\n  & span {\n    font-size: 0.9rem;\n    font-weight: 600;\n\n    & sub {\n      font-size: 0.7rem;\n      font-weight: 500;\n      color: ",";\n    }\n"])),(function(e){return e.theme.purple2}),(function(e){return e.theme.green1})),Y=function(e){var t=document.getElementById("proposal-views");if(null!=t){for(var a=0;a<2;a++)t.children[a].className="";t.children[e].className="selected-proposal";var n=document.getElementById("stake_input");null!=n&&(n.value="0"),F=0==e?"stake":"unstake",K=e,le()}},$=function e(){var t=function(){var e=C.a.chains[d];if(null!=e){var t=e.stake;return new I.ethers.Contract(t,S.a.stake,m).getPoolWithIdAndUser(f,u).then((function(e){return e}))}return!1}();0!=t&&t.then((function(t){t._pool.owner!=J.s?ee(t._pool.stakeTokenInfo.tokenAddress).then((function(e){ee(t._pool.rewardTokenInfo.tokenAddress).then((function(a){var n=te(t._pool.stakeTokenInfo.tokenAddress);0!=n&&n.then((function(n){if(n||(G="permission"),null!=Object(T.a)("stake_coin_name")){var i,o,l,s,c=Object(T.a)("stake_coin_name"),r=Object(T.a)("stake_head_stake_name"),m=Object(T.a)("stake_coin_img"),f=Object(T.a)("stake_head_stake_img"),v=(Object(T.a)("stake_head_info"),Object(T.a)("stake_head_earn_name")),O=Object(T.a)("stake_head_earn_img");if(null!=c){var j,h,y,g;if(c.innerHTML=t._pool.stakeTokenInfo.symbol||(null===(j=Object(T.g)(d))||void 0===j?void 0:j.symbol),r.innerHTML=c.innerHTML,v.innerHTML=t._pool.rewardTokenInfo.symbol||(null===(h=Object(T.g)(d))||void 0===h?void 0:h.symbol),t._pool.stakeTokenInfo.tokenAddress in Z)m.src=Z[t._pool.stakeTokenInfo.tokenAddress].tokenInfo.logoURI;else m.src=(null===(y=Object(T.g)(d))||void 0===y?void 0:y.logo)||"";if(t._pool.rewardTokenInfo.tokenAddress in Z)O.src=Z[t._pool.rewardTokenInfo.tokenAddress].tokenInfo.logoURI;else O.src=(null===(g=Object(T.g)(d))||void 0===g?void 0:g.logo)||"";f.src=m.src}Object(T.a)("stakers").innerHTML=Object(T.d)(t._pool.stakers),Object(T.a)("total_staked").innerHTML=Object(T.d)(t._pool.totalStaked/Math.pow(10,t._pool.stakeTokenInfo.decimal))+" "+(t._pool.stakeTokenInfo.symbol||(null===(i=Object(T.g)(d))||void 0===i?void 0:i.symbol))||"",Object(T.a)("reward").innerHTML=Object(T.d)(t.reward/Math.pow(10,t._pool.rewardTokenInfo.decimal))+" "+(t._pool.rewardTokenInfo.symbol||(null===(o=Object(T.g)(d))||void 0===o?void 0:o.symbol))||"",Object(T.a)("liquidity").innerHTML=Object(T.d)(t._pool.liquidity/Math.pow(10,t._pool.rewardTokenInfo.decimal))+" "+(t._pool.rewardTokenInfo.symbol||(null===(l=Object(T.g)(d))||void 0===l?void 0:l.symbol))||"";var E,w=Object(T.d)(t._pool.yield/Math.pow(10,1*t._pool.rewardTokenInfo.decimal));if(1==t._pool.yieldType)s=w+" units per 1"+(t._pool.stakeTokenInfo.symbol||(null===(E=Object(T.g)(d))||void 0===E?void 0:E.symbol))+" ";else s=w+"% ";1==t._pool.yieldDuration?s+="daily yield":2==t._pool.yieldDuration?s+="weekly yield":3==t._pool.yieldDuration?s+="monthly yield":4==t._pool.yieldDuration&&(s+="yearly yield"),Object(T.a)("stake_yield_benefit").innerHTML=s,t._pool.locked?Object(T.a)("stake_info_head").innerHTML="<div class='stake_info_black'>Locked</div>":0==t._pool.liquidity?Object(T.a)("stake_info_head").innerHTML="<div class='stake_info_red'>Insufficient liquidity pool</div>":t.ended?Object(T.a)("stake_info_head").innerHTML="<div class='stake_info_black'>Ended</div>":Object(T.a)("stake_info_head").innerHTML="<div class='stake_info_normal'>Ending at "+new Date(1e3*t._pool.time[1]).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})+"</div>",Object(T.a)("stake_info_head").style.display="",t._pool.owner==u?Object(T.a)("edit_stake").style.display="":Object(T.a)("edit_stake").style.display="none",k=e/Math.pow(10,t._pool.stakeTokenInfo.decimal),_=a/Math.pow(10,t._pool.rewardTokenInfo.decimal),b=t.totalStaked/Math.pow(10,t._pool.stakeTokenInfo.decimal),p=t,le()}}))}))})).catch((function(t){setTimeout((function(){e()}),500)})):(alert("Staking pool not found"),window.location.href="#/stake")})).catch((function(t){setTimeout((function(){e()}),2e3)}))},ee=function(e){C.a.chains[d];return e!=J.s?new I.ethers.Contract(e,S.a.token,m).balanceOf(u).then((function(e){return e})):m.getBalance(u)},te=function(e){var t=C.a.chains[d];return null!=t&&(e!=J.s?new I.ethers.Contract(e,S.a.token,m).allowance(u,t.stake).then((function(e){return e>0})):Promise.resolve(!0))},ae=function(e){var t=C.a.chains[d];if(null!=t){var a=t.stake,n=m.getSigner(),i=new I.ethers.Contract(a,S.a.stake,n);return console.log(L.a.utils.toWei(e+"","wei")),p._pool.stakeTokenInfo.tokenAddress==J.s?i.stakePool(f,L.a.utils.toWei(e+"","wei"),{value:L.a.utils.toWei(e+"","wei")}):i.stakePool(f,L.a.utils.toWei(e+"","wei"))}return!1},ne=function(e){var t=C.a.chains[d];if(null!=t){var a=t.stake,n=m.getSigner(),i=new I.ethers.Contract(a,S.a.stake,n);return console.log(L.a.utils.toWei(e+"","wei")),i.unstake(f,L.a.utils.toWei(e+"","wei"))}return!1},ie=function(e){var t;t="stake"==F?e/100*k:e/100*b;var a=document.getElementById("stake_input");null!=a&&(a.value=t+"")},oe=function(){var e,t;e=p._pool,n=t=_,Object(T.h)("stake_edit_info",(function(){var a,n,o;i=e,Object(T.a)("stake_edit_info").innerHTML="Add liquidity in "+(e.rewardTokenInfo.symbol||(null===(a=Object(T.g)(s))||void 0===a?void 0:a.symbol)),Object(T.a)("stake_edit_balance").innerHTML="Balance: "+Object(T.d)(t)+" "+(e.rewardTokenInfo.symbol||(null===(n=Object(T.g)(s))||void 0===n?void 0:n.symbol)),W=e.locked;var l=null===(o=Object(T.a)("stake_edit_lock"))||void 0===o?void 0:o.children;W?(l[0].className="stake_toggle_select",l[1].className=""):(l[1].className="stake_toggle_select",l[0].className=""),Object(T.a)("stake_edit_button").disabled=!1,Object(T.a)("stake_edit_button").innerHTML="Save",Object(T.a)("stake_save").style.display="",D=!1}))},le=function(){if(null!=p){var e=document.getElementById("stake_reward_button"),t=document.getElementById("stake_button"),a=document.getElementById("stake_amount");a.innerHTML="stake"==F?"Balance : "+Intl.NumberFormat("en-US",{maximumSignificantDigits:12}).format(k||""):"Staked : "+Intl.NumberFormat("en-US",{maximumSignificantDigits:12}).format(b||""),p._pool.locked?("stake"==F?t.disabled=!0:(t.disabled=!1,t.innerHTML="transact"!=G?"unstake":"..."),e.disabled=!0):0==p._pool.liquidity||p.ended?("stake"==F?t.disabled=!0:(t.disabled=!1,t.innerHTML="transact"!=G?"unstake":"..."),e.disabled=!1):(t.disabled=!1,e.disabled=!1,"permission"==G?t.innerHTML="stake"==F?"Grant access to "+p._pool.stakeTokenInfo.symbol:"unstake":""==G?t.innerHTML="stake"==F?"stake":"unstake":"transact"==G&&(t.disabled=!0),"transact"==Q?e.disabled=!0:e.innerHTML="withdraw reward"),p.reward>0?e.style.display="":e.style.display="none"}};t.default=function(){var e=Object(w.a)(),t=e.account,a=e.chainId,n=e.library,i=Object(z.a)(),o=Object(j.useState)(!1),l=Object(v.a)(o,2),s=(l[0],l[1],Object(E.k)());m=n,Object(j.useEffect)((function(){k=0,b=0,F="stake",G="",Q="",Z={},K=0,p=null})),Object(T.h)("stake_info_head",(function(){f=Object(T.b)("id",""),null!=t&&null!=a&&"{}"!=JSON.stringify(i)&&(u==t&&d==a&&JSON.stringify(Z)==JSON.stringify(i)||(Z=i,u=t,d=a,Y(K),$()))}));var c;null!=(c=function(){Object(T.h)("stake_head_stake_img",(function(){null!=t&&null!=a&&$()}))})&&P.push(c);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"bg-image"}),h.a.createElement("div",{className:"dxstake"},h.a.createElement("div",{className:"stakeinnerContainer"},h.a.createElement("div",{className:"stake_name_info",style:{display:"none"}}," ",h.a.createElement("span",{id:"stake_head_info"}),h.a.createElement("img",{id:"stake_head_stake_img",style:{marginLeft:"10px"}}),h.a.createElement("b",{id:"stake_head_stake_name"}),h.a.createElement("img",{id:"stake_head_earn_img"}),h.a.createElement("b",{id:"stake_head_earn_name"})),h.a.createElement("div",{id:"stake_info_head",className:"stake centre",style:{background:"none",padding:"0px",display:"none",fontSize:"14px"}}),h.a.createElement("div",{id:"stake_body_view",className:"stake"},h.a.createElement("div",{className:"proposal-views",id:"proposal-views"},h.a.createElement("p",{onClick:function(){return Y(0)},className:"selected-proposal"},"Stake"),h.a.createElement("p",{onClick:function(){return Y(1)},className:""},"Unstake"),h.a.createElement("button",{id:"edit_stake",onClick:oe,className:"stake_edit_button center",style:{display:"none"}},h.a.createElement("span",null,"Edit pool"))),h.a.createElement("div",{className:"stake-proposal-box",id:"stake-box"},h.a.createElement("div",{className:"stake-currency"},h.a.createElement("span",null,"Amount "),h.a.createElement("span",{id:"stake_amount"},"Balance ")),h.a.createElement("div",{className:"stake-currency-1"},h.a.createElement("input",{id:"stake_input",placeholder:"0.00"}),h.a.createElement("span",{id:"stake_coin_name"}),h.a.createElement("img",{id:"stake_coin_img"})),h.a.createElement("div",{className:"stake_yield_benefit"},h.a.createElement("span",{id:"stake_yield_benefit",style:{color:"limegreen"}}))),h.a.createElement("div",{className:"stake_percents"},h.a.createElement("button",{onClick:function(){return ie(25)}},"25%"),h.a.createElement("button",{onClick:function(){return ie(50)}},"50%"),h.a.createElement("button",{onClick:function(){return ie(75)}},"75%"),h.a.createElement("button",{onClick:function(){return ie(100)}},"100%")),h.a.createElement("div",{id:"msg",className:"proposal-msg-area proposal-msg-area-fail"}),h.a.createElement("div",{className:"stake_buttons"},t?h.a.createElement(y.f,{onClick:function(){var e=document.getElementById("stake_button"),t=document.getElementById("stake_input");if("permission"==G){if(null!=e){e.disabled=!0,e.innerHTML="...";var a=function(){var e=C.a.chains[d];if(null!=e){var t=e.stake,a=m.getSigner();return new I.ethers.Contract(p._pool.stakeTokenInfo.tokenAddress,S.a.token,a).approve(t,L.a.utils.toWei("9000000000000000000")).then((function(e){return e}))}return!1}();0!=a&&(Object(x.f)(!0),Object(x.d)("Transacting"),Object(x.e)(""),e.disabled=!0,G="transact",a.then((function(t){t.hash&&t.wait().then((function(t){e.disabled=!1,Object(x.b)(3e3),1==t.status?(Object(x.d)("Permission granted"),Object(x.e)("good"),G=""):(Object(x.e)("error"),Object(x.d)("Transaction failed"),G="permission"),le()})).catch((function(e){G="permission",o(e)}))})).catch((function(e){G="permission",o(e)})))}}else{var n,i=null;if(i="stake"==F?ae:ne,null!=e&&null!=t)(n=t.value)>0&&(e.disabled=!0,e.innerHTML="...",Object(x.f)(!0),Object(x.d)("Transacting"),Object(x.e)(""),e.disabled=!0,G="transact",i(Object(T.k)(n,p._pool.stakeTokenInfo.decimal)).then((function(t){t.hash&&t.wait().then((function(t){e.disabled=!1,Object(x.b)(3e3),G="",1==t.status?(Object(x.d)("Successfull"),Object(x.e)("good"),$()):(Object(x.e)("error"),Object(x.d)("Transaction failed")),le()})).catch((function(e){G="",o(e)}))})).catch((function(e){G="",o(e)})))}function o(t){Object(x.e)("error"),Object(x.d)(Object(T.j)(t)),Object(x.b)(),null!=e&&(e.disabled=!1),le()}},id:"stake_button"},"..."):h.a.createElement(y.f,{onClick:s},"Connect Wallet"))),h.a.createElement("div",{id:"stake_info_bottom",className:"stake"},h.a.createElement(V,null,h.a.createElement(X,null,h.a.createElement("p",null,"Staking Addresses"),h.a.createElement("span",{id:"stakers"})),h.a.createElement(X,null,h.a.createElement("p",null,"Total staked"),h.a.createElement("span",{id:"total_staked"}))),h.a.createElement(V,null,h.a.createElement(X,null,h.a.createElement("p",null,"Available Liquidity"),h.a.createElement("span",{id:"liquidity"})),h.a.createElement(X,null,h.a.createElement("p",null,"Reward earned"),h.a.createElement("span",{id:"reward"}))),h.a.createElement("div",{className:"stake_buttons"},h.a.createElement(y.f,{onClick:function(){var e=document.getElementById("stake_reward_button");if(null!=e){e.disabled=!0,e.innerHTML="...";var t=function(){var e=C.a.chains[d];if(null!=e){var t=e.stake,a=m.getSigner();return new I.ethers.Contract(t,S.a.stake,a).withdraw(f)}return!1}();0!=t&&(Object(x.f)(!0),Object(x.d)("Transacting"),Object(x.e)(""),e.disabled=!0,Q="transact",t.then((function(t){t.hash&&t.wait().then((function(t){e.disabled=!1,Object(x.b)(3e3),1==t.status?(Object(x.d)("Reward sent to wallet"),Object(x.e)("good"),Q="",$()):(Object(x.e)("error"),Object(x.d)("Transaction failed"),Q=""),le()})).catch((function(e){Q="",a(e)}))})).catch((function(e){Q="",a(e)})))}function a(t){Object(x.e)("error"),Object(x.d)(Object(T.j)(t)),Object(x.b)(),null!=e&&(e.disabled=!1),le()}},id:"stake_reward_button"},"Withdraw reward"))),h.a.createElement(R,null))))}}}]);
//# sourceMappingURL=38.13318112.chunk.js.map