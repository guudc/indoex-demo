{"version":3,"sources":["pages/Airdrop/activate-account.tsx","functions/user.js"],"names":["FormContainer","styled","div","Form","form","theme","bg1","bg2","FormTitle","h2","FormGroup","SubmitButton","button","ErrorMessage","p","SuccessMessage","ActivateAccount","history","useState","error","setError","success","setSuccess","processing","setProcessing","userData","setUserData","isAuthenticated","token","user","useEffect","a","axios","get","process","_id","headers","Authorization","response","data","fetchUser","to","verified","onSubmit","event","preventDefault","activate","then","status","message","push","disabled","type","sendVerification","fetch","method","Accept","body","JSON","stringify","json","catch","err","console","log","submitAirdrop","airdrop","updateMyAirdrop","id","deleteMyAirdrop","getMyAirdrops","getUserDetails","updatePassword","password"],"mappings":"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","file":"static/js/30.ea408b8f.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport { activate } from 'src/functions/user'\nimport { isAuthenticated } from './../../helper/auth'\nimport { Redirect } from 'react-router-dom'\nimport Loader from 'src/components/Loader'\n\n// Styled-Components\nconst FormContainer = styled.div`\n\twidth: 100%;\n\toverflow: visible;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin: auto;\n`\n\nconst Form = styled.form`\n\twidth: calc(100% - 40px);\n\tmax-width: 400px;\n\tbackground-color: ${({ theme }) => theme.bg1};\n\tborder: 1px solid ${({ theme }) => theme.bg2};\n\tborder-radius: 8px;\n\tpadding: 1rem;\n`\n\nconst FormTitle = styled.h2`\n\tfont-size: 1.3rem;\n\ttext-align: center;\n\tmargin-bottom: 1rem;\n`\n\nconst FormGroup = styled.div`\n\tmargin-bottom: 1.5rem;\n`\n\nconst SubmitButton = styled.button`\n\twidth: 100%;\n\tcursor: pointer;\n\ttransition: all 0.5s ease;\n\tbackground-color: #7eb946;\n\tcolor: #212121;\n\tfont-size: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: none;\n\tborder-radius: 5px;\n\t&:hover {\n\t\tbackground-color: #212121;\n\t\tcolor: #eaeaea;\n\t}\n`\n\nconst ErrorMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #f44336;\n`\n\nconst SuccessMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #4caf50;\n`\n\nconst ActivateAccount = ({ history }) => {\n\t// State to hold errors\n\tconst [error, setError] = useState('')\n\t// State to hold success message\n\tconst [success, setSuccess] = useState('')\n\tconst [processing, setProcessing] = useState(false)\n\tconst [userData, setUserData] = useState(null);\n\n\tconst { token, user } = isAuthenticated()\n\n\t// Function to check for errors\n\tconst validate = () => {\n\t\tlet messageError = ''\n\n\t\t// Set errors accordingly\n\t\tif (messageError) {\n\t\t\tsetError(messageError)\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\n\tuseEffect(() => {\n\t\tconst fetchUser = async () => {\n\t\t  const response = await \n\t\t  axios.get(`${process.env.REACT_APP_BACKEND_API}/me/${user._id}`,\n\t\t\t{\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${user.token}`,\n\t\t\t},\n\t\t\t}\n\t\t\t);\n\t\t  setUserData(response.data.user);\n\t\t};\n\t\tfetchUser();\n\t  }, []);\n\n\n\t// Function to handle form submission\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault()\n\t\tsetProcessing(true)\n\t\tconst isValid = validate()\n\t\tif (isValid) {\n\t\t\t// Clear state\n\t\t\tsetError('')\n\t\t}\n\t\tactivate(token, {\n\t\t\ttoken: user.token\n\t\t}).then((data) => {\n\t\t\tif (data.status == false) {\n\t\t\t\tsetError(data.message)\n\t\t\t\tsetSuccess('')\n\t\t\t\tsetProcessing(false)\n\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tsetError('')\n\t\t\t\tsetSuccess(data.message)\n\t\t\t\tsetProcessing(false)\n\t\t\t\thistory.push('/dashboard')\n\t\t\t}\n\t\t})\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!user && !userData ? <Redirect to=\"/login\" /> : null}\n\t\t\t{user && userData && userData.verified ? <Redirect to=\"/verify-email\" /> : null}\n\n\t\t\t<FormContainer>\n\t\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t\t<FormTitle>Activate Account</FormTitle>\n\n\t\t\t\t\t{success ? <SuccessMessage>{success}</SuccessMessage> : null}\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t{processing ? (\n\t\t\t\t\t\t\t<SubmitButton disabled type=\"submit\">\n\t\t\t\t\t\t\t\tProcessing<Loader/>\n\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Activate</SubmitButton>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t{error ? <ErrorMessage>{error}</ErrorMessage> : null}\n\t\t\t\t</Form>\n\t\t\t</FormContainer>\n\t\t</>\n\t)\n}\n\nexport default ActivateAccount\n","export const sendVerification = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/sendVerification`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const activate = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/activate`, {\n\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const submitAirdrop = (token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/submit-airdrop`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const updateMyAirdrop = (id, token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/update/airdrop/${id}`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const deleteMyAirdrop = (id, token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/delete/airdrop/${id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getMyAirdrops = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/my-airdrops`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getUserDetails = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/me`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const updatePassword = (token, password) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/updatePassword`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(password)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n"],"sourceRoot":""}