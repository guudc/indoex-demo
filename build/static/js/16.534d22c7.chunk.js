(this["webpackJsonpdxswap-dapp"]=this["webpackJsonpdxswap-dapp"]||[]).push([[16],{1234:function(e,t,a){},1235:function(e,t,a){e.exports=a.p+"static/media/eth-symbol.264a6581.jpg"},1248:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),l=a(17),r=a(0),s=a.n(r),c=a(22),i=(a(1234),a(718)),m=a.n(i),p=(a(719),a(199)),u=a.n(p),d=a(1235),f=a.n(d),g=a(38),h=a(166),v=a(671),b="".concat("http://localhost:5000","/");function y(){return(y=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(b+"getallbalance",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t})}).then((function(e){return e.json().then((function(e){return e}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(null===(t=window.ethereum)||void 0===t?void 0:t.request)){e.next=17;break}return e.prev=1,e.next=4,null===(a=window.ethereum)||void 0===a?void 0:a.request({method:"wallet_switchEthereumChain",params:[{chainId:u.a.utils.toHex(137)}]});case 4:e.next=17;break;case 6:if(e.prev=6,e.t0=e.catch(1),4902!==(null===(n=e.t0)||void 0===n?void 0:n.code)){e.next=17;break}return e.prev=9,e.next=12,null===(l=window.ethereum)||void 0===l?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:u.a.utils.toHex(137),chainName:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com"],rpcUrls:["https://poly-mainnet.gateway.pokt.network/v1/lb/61141e8259501900341bb3e2"]}]});case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log(e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(){return e.apply(this,arguments)}}();t.default=function(){var e=Object(c.a)(),t=e.account,a=e.chainId,n=Object(g.k)();Object(h.h)("voting_warning",(function(){var e=document.getElementById("voting_warning"),n=document.getElementById("votingParent");null!=e&&null!=n&&(null==t||137!=a&&null!=a?(e.style.display="block",n.style.display="none"):(e.style.display="none",n.style.display=""))}));var r=function(){var e=Object(l.a)(o.a.mark((function e(){var a,n,l,r,s,c,m,p,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(a=document.getElementById("proposal-views"))){e.next=27;break}if(n=a.value,null==(l=document.getElementById("proposal-content-title"))){e.next=27;break}if(r=l.value,null==(s=document.getElementById("proposal-content-area"))){e.next=27;break}if(c=s.value,""==r.trim().replace(/ /g,"")){e.next=26;break}if(!(c.trim().replace(/ /g,"").length>50)){e.next=23;break}if(m=document.getElementById("submit-proposal-btn"),p=document.getElementById("proposal-msg-area"),null==m||null==p){e.next=21;break}return m.disabled=!0,m.innerHTML="Creating...",p.style.display="none",e.next=19,Object(h.e)(t);case 19:null!=(u=e.sent)?i(r,n,c,u).then((function(e){console.log(e),m.disabled=!1,m.innerHTML="Create Proposal",p.style.display="flex","error"===e.status||"false"===e.status?(p.innerHTML=e.msg,p.className="proposal-msg-area proposal-msg-area-fail"):!0===e.status&&(p.innerHTML="Created Successfully",p.className="proposal-msg-area proposal-msg-area-success",window.location.href=window.location.href.replace("/voting","/vote"))})).catch((function(e){m.disabled=!1,m.innerHTML="Create Proposal",p.style.display="flex",p.innerHTML="Network error",p.className="proposal-msg-area proposal-msg-area-fail"})):(m.disabled=!1,m.innerHTML="Create Proposal",Object(v.c)({status:"error",msg:"Please authorize this transaction",duration:3e3}));case 21:e.next=24;break;case 23:alert("Proposal body length is too small\nmust be over 50 words");case 24:e.next=27;break;case 26:alert("Title cannot be empty");case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function i(e,t,a,n){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function e(a,n,l,r){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={title:a,body:l,action:n,wallet:t,key:r},console.log(r),e.abrupt("return",fetch(b+"newproposal",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json().then((function(e){return e}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.f)("voting"),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"votingParent",className:"create-proposal"},s.a.createElement("div",{className:"bg-image"}),s.a.createElement("div",{className:"dxvoting"},s.a.createElement("div",{className:"votingContainer"},s.a.createElement("div",{className:"voting"},s.a.createElement("div",{className:"voting-content-header"},s.a.createElement("h3",{className:"dxvoting-title"},"Create Proposal"),s.a.createElement("p",{className:"voting-content"},"Choose an action and describe your community suggestion. The proposal cannot be changed once it has been submitted, so please double-check all details before submitting. The voting process will span one month and will begin immediately.")),s.a.createElement("div",{className:"voting-proposal-box"},s.a.createElement("div",{className:"voting-proposal"},s.a.createElement("div",{className:"proposal-title"},"Proposed Action"),s.a.createElement("select",{className:"proposal-views",id:"proposal-views"},s.a.createElement("option",{className:"transfer-token-proposal",value:"add"},"Add Feature"),s.a.createElement("option",{className:"transfer-token-proposal",value:"modify"},"Modify Feature"),s.a.createElement("option",{className:"transfer-token-proposal",value:"remove"},"Remove Feature"))),s.a.createElement("div",{className:"token-tranfer-box off"},s.a.createElement("form",{className:"token-transfer-form"},s.a.createElement("div",{className:"token-tranfer-to"},s.a.createElement("h3",{className:"token-tranfer-to-title"},"To"),s.a.createElement("input",{type:"text",placeholder:"Wallet Address or ENS name",className:"token-tranfer-to-input"})),s.a.createElement("div",{className:"token-tranfer-amount"},s.a.createElement("img",{src:f.a,alt:"Ethereum",className:"ethereum"}),s.a.createElement("select",{className:"token-select-tranfer"},s.a.createElement("option",{className:"WETH"},"WETH")),s.a.createElement("div",{className:"token-input-divider"}),s.a.createElement("input",{type:"text",placeholder:"0",className:"token-amount-input"})))),s.a.createElement("div",{className:"proposal-content"},s.a.createElement("input",{id:"proposal-content-title",className:"proposal-content-title",placeholder:"Proposal Title"}),s.a.createElement("hr",null),s.a.createElement("div",{id:"proposal-content-placeholder",className:"proposal-content-placeholder"},s.a.createElement("p",null," -- Proposal Format -- "),s.a.createElement("p",null," ## Summary"),s.a.createElement("p",null," ## Methodology"),s.a.createElement("p",null," Insert your methodology here"),s.a.createElement("p",null," ## Conclusion"),s.a.createElement("p",null," Insert your conclusion here")),s.a.createElement("textarea",{id:"proposal-content-area",className:"proposal-content-area"}),s.a.createElement("div",{id:"proposal-msg-area",className:"proposal-msg-area proposal-msg-area-fail"})),t?s.a.createElement("button",{id:"submit-proposal-btn",className:"submit-proposal-btn",onClick:r},"..."):s.a.createElement("button",{onClick:n,className:"submit-proposal-btn"},"Connect Wallet"),s.a.createElement("p",{className:"dont-have-2-point-4M"},"You must have 2000 IND to submit a proposal"))))),function e(){var a=setInterval((function(){var n=document.getElementById("proposal-content-placeholder");if(null!=n){clearInterval(a),n.onclick=function(){var e=document.getElementById("proposal-content-area");null!=e&&(e.style.display="flex",n.style.display="none",e.focus())};var o=document.getElementById("proposal-content-area");null!=o&&(o.oninput=function(){""==o.value&&(n.style.display="block",o.style.display="none")},o.onblur=o.oninput);var l=document.getElementById("submit-proposal-btn");null!=l&&(l.disabled=!0,null==t?l.innerHTML="Wallet not connected":function(e){return y.apply(this,arguments)}(t).then((function(t){t.status?t.balance>=2e3?(l.disabled=!1,l.innerHTML="Create Proposal"):l.innerHTML="BALANCE: "+Math.floor(t.balance)+"IND":e()})).catch((function(t){e()})))}}),1e3)}()),s.a.createElement("div",{id:"voting_warning",className:"votingContainer",style:{display:"none"}},s.a.createElement("div",{className:"voting"},s.a.createElement("div",{className:"voting-content-header",style:{background:"none"}},s.a.createElement("h3",{className:"dxvoting-title"},"Voting"),s.a.createElement("p",{className:"voting-content",style:{textAlign:"center"}},"All voting can only be done on the Polygon Network.")),s.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},s.a.createElement("img",{src:m.a,style:{maxWidth:"250px",maxHeight:"250px",marginBottom:"30px",marginTop:"20px"}}),t?s.a.createElement("button",{onClick:E,className:"voting voting_warning"},"Switch network to Polygon"):s.a.createElement("button",{onClick:n,className:"voting voting_warning"},"Connect Wallet")))),s.a.createElement(v.a,null))}},671:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"c",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return v})),a.d(t,"e",(function(){return y}));var n,o,l,r,s=a(5),c=a(0),i=a.n(c),m=a(7),p=a(166),u=(Math.random(),m.default.div(n||(n=Object(s.a)(["\n   position:fixed;\n   top:0px;left:0px;\n   width:100vw;\n   height:1px;\n   display:none;\n   align-items:flex-start;\n   z-index:400;\n"])))),d=m.default.div(o||(o=Object(s.a)(["\n   padding:15px 20px;\n   background-color: ",";\n   min-height:40px;\n   color:",";\n   font-size:15px;\n   margin-left:auto;margin-right:80px;\n   margin-top:120px;\n   box-shadow:0 0 6px 3px rgba(0,0,0,.1);\n   border-radius:10px;\n   display:flex;\n   align-items:center;\n   max-width:350px;\n"])),(function(e){return e.theme.dark1}),(function(e){return e.theme.text1})),f=m.default.span(l||(l=Object(s.a)(["\n    margin-left:10px;\n    margin-right:10px;\n"]))),g=function(e){if(e){null!=Object(p.a)("modal_info_msg")&&(Object(p.a)("modal_info_msg").style.display="flex");try{clearTimeout(r)}catch(t){}}else null!=Object(p.a)("modal_info_msg")&&(Object(p.a)("modal_info_msg").style.display="none")},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;try{clearTimeout(r)}catch(t){}r=setTimeout((function(){Object(p.a)("modal_info_msg").style.display="none"}),e)},v=function(e){null!=Object(p.a)("modal_info_msg_body")&&(Object(p.a)("modal_info_msg_body").innerHTML=e)},b=function(e){g(!0),v(e.msg||""),y(e.status||""),h(e.duration||3e3)},y=function(e){var t=Object(p.a)("modal_info_msg_status");"error"==e?null!=t&&(Object(p.a)("modal_info_msg_status").className="fas fa-times",t.style.color="red"):"good"==e?null!=t&&(Object(p.a)("modal_info_msg_status").className="fas fa-check-circle",t.style.color="limegreen"):null!=t&&(Object(p.a)("modal_info_msg_status").className="fas fa-spinner fa-spin",t.style.color="")},E=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(u,{id:"modal_info_msg"},i.a.createElement(d,null,i.a.createElement("span",{id:"modal_info_msg_status",className:"fas fa-spinner fa-spin"}),i.a.createElement(f,{id:"modal_info_msg_body"},"Loading"))))}},718:function(e,t,a){e.exports=a.p+"static/media/wrong.a5eb2125.png"},719:function(e,t,a){}}]);
//# sourceMappingURL=16.534d22c7.chunk.js.map