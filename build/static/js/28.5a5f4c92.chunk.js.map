{"version":3,"sources":["pages/Airdrop/register.tsx","functions/auth.js"],"names":["FormContainer","styled","div","Form","form","theme","bg1","bg2","FormTitle","h2","FormGroup","Label","label","Input","input","props","error","SubmitButton","button","ErrorMessage","p","SuccessMessage","Register","history","useState","email","password","confirmPassword","userInput","setUserInput","emailError","passwordError","confirmPasswordError","errors","setErrors","success","setSuccess","setError","setToken","processing","setProcessing","user","isAuthenticated","handleChange","event","target","name","value","validate","handleSubmit","a","preventDefault","strongRegexHigherCase","RegExp","strongRegexLowerCase","strongRegexNumber","strongRegexSpecialCharacter","length","test","axios","post","process","data","status","message","login","then","authenticate","token","push","console","log","to","onSubmit","htmlFor","type","onChange","disabled","style","color","fetch","method","headers","Accept","body","JSON","stringify","response","json","catch","err","changePassword"],"mappings":"4RASMA,EAAgBC,UAAOC,IAAV,yJASbC,EAAOF,UAAOG,KAAV,2KAGW,qBAAGC,MAAkBC,OACrB,qBAAGD,MAAkBE,OAKpCC,EAAYP,UAAOQ,GAAV,iGAMTC,EAAYT,UAAOC,IAAV,sDAITS,EAAQV,UAAOW,MAAV,gDAILC,EAAQZ,UAAOa,MAAV,qVAgBR,SAACC,GAAD,OACDA,EAAMC,OAAN,sCAMIC,EAAehB,UAAOiB,OAAV,2SAgBZC,EAAelB,UAAOmB,EAAV,mEAKZC,EAAiBpB,UAAOmB,EAAV,mEAmOLE,UA9NE,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAEnB,EAAkCC,mBAAS,CAC1CC,MAAO,GACPC,SAAU,GACVC,gBAAiB,KAHlB,mBAAOC,EAAP,KAAkBC,EAAlB,KAMA,EAA4BL,mBAAS,CACpCM,WAAY,GACZC,cAAe,GACfC,qBAAsB,KAHvB,mBAAOC,EAAP,KAAeC,EAAf,KAMA,EAA8BV,mBAAS,IAAvC,mBAAOW,EAAP,KAAgBC,EAAhB,KACA,EAA0BZ,mBAAS,IAAnC,mBAAOR,EAAP,KAAcqB,EAAd,KACA,EAA0Bb,mBAAS,IAAnC,mBAAcc,GAAd,WACA,EAAoCd,oBAAS,GAA7C,mBAAOe,EAAP,KAAmBC,EAAnB,KACQC,EAASC,cAATD,KAGFE,EAAe,SAACC,GACrB,MAAwBA,EAAMC,OAAtBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACdlB,EAAa,2BACTD,GADQ,kBAEVkB,EAAOC,MAKJC,EAAW,WAChB,IAAIlB,EAAa,GACbC,EAAgB,GAChBC,EAAuB,GAmB3B,OAhBKJ,EAAUH,QACdK,EAAa,yBAGTF,EAAUF,WACdK,EAAgB,4BAGZH,EAAUD,kBACdK,EAAuB,oCAGpBJ,EAAUF,WAAaE,EAAUD,kBACpCK,EAAuB,0BAGpBF,GAAcC,GAAiBC,KAClCE,EAAU,CACTJ,aACAC,gBACAC,0BAEM,IAOHiB,EAAY,uCAAG,WAAOL,GAAP,yBAAAM,EAAA,yDACpBN,EAAMO,iBACNX,GAAc,GACRY,EAAwB,IAAIC,OAAO,gBACnCC,EAAuB,IAAID,OAAO,gBAClCE,EAAoB,IAAIF,OAAO,gBAC/BG,EAA8B,aAEhC5B,EAAUF,SAAS+B,OAAS,IAC/BpB,EAAS,0CACTD,EAAW,IACXI,GAAc,IAEXZ,EAAUF,SAAS+B,OAAS,KAC/BpB,EAAS,8CACTD,EAAW,IACXI,GAAc,IAGVY,EAAsBM,KAAK9B,EAAUF,YACzCW,EAAS,uCACTD,EAAW,IACXI,GAAc,IAEVc,EAAqBI,KAAK9B,EAAUF,YACxCW,EAAS,sCACTD,EAAW,IACXI,GAAc,IAEVe,EAAkBG,KAAK9B,EAAUF,YACrCW,EAAS,mCACTD,EAAW,IACXI,GAAc,IAEVgB,EAA4BE,KAAK9B,EAAUF,UAlC5B,wBAmCnBW,EAAS,8CACTD,EAAW,IACXI,GAAc,GArCK,yCAyCHQ,IAzCG,wBA2ClBd,EAAU,CACTJ,WAAY,GACZC,cAAe,GACfC,qBAAsB,KA9CL,UAiDK2B,IAAMC,KAAN,UAAcC,wBAAd,aAA4D,CAElFpC,MAAOG,EAAUH,MACjBC,SAAUE,EAAUF,WApDH,oBAsDC,IALXoC,EAjDU,EAiDVA,MAKCC,OAtDS,wBAuDjB1B,EAASyB,EAAKE,SACd5B,EAAW,IACXI,GAAc,GAzDG,2BA6DjBH,EAAS,IACTR,EAAa,CACZJ,MAAO,GACPC,SAAU,GACVC,gBAAiB,KAElBS,EAAW0B,EAAKE,SAChBC,YAAM,CAAExC,MAAOG,EAAUH,MAAOC,SAAUE,EAAUF,WAAYwC,MAAK,SAACJ,GACrE,GAAmB,GAAfA,EAAKC,OAIR,OAHA1B,EAASyB,EAAKE,SACd5B,EAAW,SACXI,GAAc,GAGd2B,YAAaL,GAAM,WAElBzB,EAAS,IACTC,EAASwB,EAAKM,OACd5B,GAAc,GACdjB,EAAQ8C,KAAR,qBACAjC,EAAW0B,EAAKE,eAInBxB,GAAc,GArFG,2DAyFnB8B,QAAQC,IAAR,MACAnC,EAAW,IACXC,EAAS,8CACTG,GAAc,GA5FK,2DAAH,sDAgGlB,OACC,oCACEC,EAAO,kBAAC,IAAD,CAAU+B,GAAG,MAAS,KAE9B,kBAACxE,EAAD,KACC,kBAACG,EAAD,CAAMsE,SAAUxB,GACf,kBAACzC,EAAD,qBACA,kBAACE,EAAD,KACC,kBAACC,EAAD,CAAO+D,QAAQ,SAAf,SACA,kBAAC7D,EAAD,CACC8D,KAAK,QACL7B,KAAK,QACLC,MAAOnB,EAAUH,MACjBmD,SAAUjC,EACV3B,MAAOiB,EAAOH,aAEdG,EAAOH,WAAa,kBAACX,EAAD,KAAec,EAAOH,YAA6B,MAEzE,kBAACpB,EAAD,KACC,kBAACC,EAAD,CAAO+D,QAAQ,YAAf,YACA,kBAAC7D,EAAD,CACC8D,KAAK,WACL7B,KAAK,WACLC,MAAOnB,EAAUF,SACjBkD,SAAUjC,EACV3B,MAAOiB,EAAOF,gBAEdE,EAAOF,cAAgB,kBAACZ,EAAD,KAAec,EAAOF,eAAgC,MAE/E,kBAACrB,EAAD,KACC,kBAACC,EAAD,CAAO+D,QAAQ,mBAAf,oBACA,kBAAC7D,EAAD,CACC8D,KAAK,WACL7B,KAAK,kBACLC,MAAOnB,EAAUD,gBACjBiD,SAAUjC,EACV3B,MAAOiB,EAAOD,uBAEdC,EAAOD,qBAAuB,kBAACb,EAAD,KAAec,EAAOD,sBAAuC,MAE7F,kBAACtB,EAAD,KACE6B,EACA,kBAACtB,EAAD,CAAc4D,UAAQ,EAACF,KAAK,UAA5B,aAEC,kBAAC,IAAD,OAGD,kBAAC1D,EAAD,CAAc0D,KAAK,UAAnB,UACE,KAEJ,kBAAC,IAAD,CAAMH,GAAG,SAASM,MAAO,CAAEC,MAAO,SAAlC,0BAGC5C,EAAU,kBAACd,EAAD,KAAiBc,GAA4B,KACvDnB,EAAQ,kBAACG,EAAD,KAAeH,GAAwB,U,iCCjTrD,oEAAO,IAAMiD,EAAQ,SAACxB,GACrB,OAAOuC,MAAM,GAAD,OAAInB,wBAAJ,UAA+C,CAE1DoB,OAAQ,OACRC,QAAS,CACRC,OAAQ,mBACR,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAU7C,KAEpByB,MAAK,SAACqB,GACN,OAAOA,EAASC,UAEhBC,OAAM,SAACC,GACPpB,QAAQC,IAAImB,OAGFC,EAAiB,SAAClD,GAC9B,OAAOuC,MAAM,GAAD,OAAInB,wBAAJ,0BAA+D,CAC1EoB,OAAQ,OACRC,QAAS,CACRC,OAAQ,mBACR,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAU7C,KAEpByB,MAAK,SAACqB,GACN,OAAOA,EAASC,UAEhBC,OAAM,SAACC,GACPpB,QAAQC,IAAImB","file":"static/js/28.5a5f4c92.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport axios from 'axios'\nimport { authenticate, isAuthenticated } from '../../helper/auth'\nimport { Link, Redirect } from 'react-router-dom'\nimport Loader from 'src/components/Loader'\nimport { login } from '../../functions/auth'\n\n// Styled-Components\nconst FormContainer = styled.div`\n\twidth: 100%;\n\toverflow: visible;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin: auto;\n`\n\nconst Form = styled.form`\n\twidth: calc(100% - 40px);\n\tmax-width: 400px;\n\tbackground-color: ${({ theme }) => theme.bg1};\n\tborder: 1px solid ${({ theme }) => theme.bg2};\n\tborder-radius: 8px;\n\tpadding: 1rem;\n`\n\nconst FormTitle = styled.h2`\n\tfont-size: 1.3rem;\n\ttext-align: center;\n\tmargin-bottom: 1rem;\n`\n\nconst FormGroup = styled.div`\n\tmargin-bottom: 1.5rem;\n`\n\nconst Label = styled.label`\n\tfont-size: 1rem;\n`\n\nconst Input = styled.input<{ error: string }>`\n\tbackground: none;\n\tdisplay: block;\n\twidth: 100%;\n\tpadding: 0.5rem;\n\tfont-size: 1rem;\n\tborder: 1px solid #eaeaea;\n\tcolor: #ffffff;\n\tborder-radius: 5px;\n\tmargin-bottom: 0.5rem;\n\t&:focus {\n\t\toutline: none;\n\t\tcolor: #ffffff;\n\t\tborder-color: #eaeaea;\n\t\tborder-width: 2px;\n\t}\n\t${(props) =>\n\t\tprops.error &&\n\t\t`\n    border-color: #f44336;\n  `};\n`\n\nconst SubmitButton = styled.button`\n\twidth: 100%;\n\tcursor: pointer;\n\ttransition: all 0.5s ease;\n\tbackground-color: #7eb946;\n\tcolor: #ffffff;\n\tfont-size: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: none;\n\tborder-radius: 5px;\n\t&:hover {\n\t\tbackground-color: #212121;\n\t\tcolor: #eaeaea;\n\t}\n`\n\nconst ErrorMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #f44336;\n`\n\nconst SuccessMessage = styled.p`\n\tfont-size: 1rem;\n\tcolor: #4caf50;\n`\n\nconst Register = ({ history }) => {\n\t// State to hold user input\n\tconst [userInput, setUserInput] = useState({\n\t\temail: '',\n\t\tpassword: '',\n\t\tconfirmPassword: ''\n\t})\n\t// State to hold errors\n\tconst [errors, setErrors] = useState({\n\t\temailError: '',\n\t\tpasswordError: '',\n\t\tconfirmPasswordError: ''\n\t})\n\t// State to hold success message\n\tconst [success, setSuccess] = useState('')\n\tconst [error, setError] = useState('')\n\tconst [token, setToken] = useState('')\n\tconst [processing, setProcessing] = useState(false)\n\tconst { user } = isAuthenticated()\n\n\t// Function to handle user input\n\tconst handleChange = (event) => {\n\t\tconst { name, value } = event.target\n\t\tsetUserInput({\n\t\t\t...userInput,\n\t\t\t[name]: value\n\t\t})\n\t}\n\n\t// Function to check for errors\n\tconst validate = () => {\n\t\tlet emailError = ''\n\t\tlet passwordError = ''\n\t\tlet confirmPasswordError = ''\n\n\t\t// Check for empty email\n\t\tif (!userInput.email) {\n\t\t\temailError = 'Email cannot be empty'\n\t\t}\n\t\t// Check for empty password\n\t\tif (!userInput.password) {\n\t\t\tpasswordError = 'Password cannot be empty'\n\t\t}\n\t\t// Check for empty confirm password\n\t\tif (!userInput.confirmPassword) {\n\t\t\tconfirmPasswordError = 'Confirm password cannot be empty'\n\t\t}\n\t\t// Check if passwords match\n\t\tif (userInput.password !== userInput.confirmPassword) {\n\t\t\tconfirmPasswordError = 'Passwords must match'\n\t\t}\n\t\t// Set errors accordingly\n\t\tif (emailError || passwordError || confirmPasswordError) {\n\t\t\tsetErrors({\n\t\t\t\temailError,\n\t\t\t\tpasswordError,\n\t\t\t\tconfirmPasswordError\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\t// Function to handle form submission\n\tconst handleSubmit = async (event) => {\n\t\tevent.preventDefault()\n\t\tsetProcessing(true)\n\t\tconst strongRegexHigherCase = new RegExp('^(?=.*[A-Z])')\n\t\tconst strongRegexLowerCase = new RegExp('^(?=.*[a-z])')\n\t\tconst strongRegexNumber = new RegExp('^(?=.*[0-9])')\n\t\tconst strongRegexSpecialCharacter = /^(.*\\W).*$/\n\n\t\tif (userInput.password.length < 8) {\n\t\t\tsetError('Password must be atleast 8 characters.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (userInput.password.length > 40) {\n\t\t\tsetError('Password must be maximum of 40 characters.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\n\t\tif (!strongRegexHigherCase.test(userInput.password)) {\n\t\t\tsetError('Password must contain an uppercase.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexLowerCase.test(userInput.password)) {\n\t\t\tsetError('Password must contain a lowercase.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexNumber.test(userInput.password)) {\n\t\t\tsetError('Password must contain a number.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t}\n\t\tif (!strongRegexSpecialCharacter.test(userInput.password)) {\n\t\t\tsetError('Password must contain a special character.')\n\t\t\tsetSuccess('')\n\t\t\tsetProcessing(false)\n\t\t\treturn\n\t\t}\n\t\ttry {\n\t\t\tconst isValid = validate()\n\t\t\tif (isValid) {\n\t\t\t\tsetErrors({\n\t\t\t\t\temailError: '',\n\t\t\t\t\tpasswordError: '',\n\t\t\t\t\tconfirmPasswordError: ''\n\t\t\t\t})\n\n\t\t\t\tconst { data } = await axios.post(`${process.env.REACT_APP_BACKEND_API}/register`, {\n\n\t\t\t\t\temail: userInput.email,\n\t\t\t\t\tpassword: userInput.password\n\t\t\t\t})\n\t\t\t\tif (data.status == false) {\n\t\t\t\t\tsetError(data.message)\n\t\t\t\t\tsetSuccess('')\n\t\t\t\t\tsetProcessing(false)\n\t\t\t\t\treturn\n\t\t\t\t} else {\n\t\t\t\t\t// Clear state\n\t\t\t\t\tsetError('')\n\t\t\t\t\tsetUserInput({\n\t\t\t\t\t\temail: '',\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tconfirmPassword: ''\n\t\t\t\t\t})\n\t\t\t\t\tsetSuccess(data.message)\n\t\t\t\t\tlogin({ email: userInput.email, password: userInput.password }).then((data) => {\n\t\t\t\t\t\tif (data.status == false) {\n\t\t\t\t\t\t\tsetError(data.message)\n\t\t\t\t\t\t\tsetSuccess('')\n\t\t\t\t\t\t\tsetProcessing(false)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tauthenticate(data, () => {\n\t\t\t\t\t\t\t\t// Clear state\n\t\t\t\t\t\t\t\tsetError('')\n\t\t\t\t\t\t\t\tsetToken(data.token)\n\t\t\t\t\t\t\t\tsetProcessing(false)\n\t\t\t\t\t\t\t\thistory.push(`/register-success`)\n\t\t\t\t\t\t\t\tsetSuccess(data.message)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tsetProcessing(false)\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tsetSuccess('')\n\t\t\tsetError('Registration error. Please try again later')\n\t\t\tsetProcessing(false)\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{user ? <Redirect to=\"/\" /> : null}\n\n\t\t\t<FormContainer>\n\t\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t\t<FormTitle>Register Now</FormTitle>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"email\">Email</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tvalue={userInput.email}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.emailError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.emailError ? <ErrorMessage>{errors.emailError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"password\">Password</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={userInput.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.passwordError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.passwordError ? <ErrorMessage>{errors.passwordError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tname=\"confirmPassword\"\n\t\t\t\t\t\t\tvalue={userInput.confirmPassword}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\terror={errors.confirmPasswordError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{errors.confirmPasswordError ? <ErrorMessage>{errors.confirmPasswordError}</ErrorMessage> : null}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t{processing ? (\n\t\t\t\t\t\t\t<SubmitButton disabled type=\"submit\">\n\t\t\t\t\t\t\t\tSubmitting\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Submit</SubmitButton>\n\t\t\t\t\t\t)}{' '}\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Link to=\"/login\" style={{ color: '#fff' }}>\n\t\t\t\t\t\tHave an account? Login\n\t\t\t\t\t</Link>\n\t\t\t\t\t{success ? <SuccessMessage>{success}</SuccessMessage> : null}\n\t\t\t\t\t{error ? <ErrorMessage>{error}</ErrorMessage> : null}\n\t\t\t\t</Form>\n\t\t\t</FormContainer>\n\t\t</>\n\t)\n}\n\nexport default Register\n","export const login = (user) => {\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/login`, {\n\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err)\n\t\t})\n}\nexport const changePassword = (user) => {\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/sendResetPasswordCode`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err)\n\t\t})\n}\n"],"sourceRoot":""}