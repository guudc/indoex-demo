{"version":3,"sources":["pages/Airdrop/dashboard.tsx","functions/user.js"],"names":["DashboardContainer","styled","div","SubmitButton","button","Title","h1","Dashboard","history","useState","user","setUser","token","isAuthenticated","useEffect","getUserDetails","then","data","console","log","message","alert","signout","push","setTimeout","window","location","reload","verified","to","role","email","style","width","type","cursor","onClick","sendVerification","fetch","process","method","headers","Accept","Authorization","body","JSON","stringify","response","json","catch","err","activate","submitAirdrop","airdrop","updateMyAirdrop","id","deleteMyAirdrop","getMyAirdrops","updatePassword","password"],"mappings":"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","file":"static/js/31.9e03a34e.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, Redirect } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { isAuthenticated } from '../../helper/auth'\nimport axios from 'axios'\nimport { signout } from 'src/helper/auth'\nimport { getUserDetails } from 'src/functions/user'\n\ninterface Props {\n\ttitle: string\n\tchildren: React.ReactNode\n}\n\nconst DashboardContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 20px;\n\t@media screen and (max-width: 600px) {\n\t\twidth: 100%;\n\t}\n`\n\nconst SubmitButton = styled.button`\n\twidth: 100%;\n\tcursor: pointer;\n\ttransition: all 0.5s ease;\n\tbackground-color: #7eb946;\n\tcolor: #212121;\n\tfont-size: 1rem;\n\tpadding: 0.5rem 1rem;\n\tborder: none;\n\tborder-radius: 5px;\n\t&:hover {\n\t\tbackground-color: #212121;\n\t\tcolor: #eaeaea;\n\t}\n`\n\nconst Title = styled.h1`\n\tfont-size: 20px;\n\tmargin-bottom: 20px;\n\t@media screen and (max-width: 600px) {\n\t\twidth: 100%;\n\t}\n`\n\nconst Dashboard: React.FC<Props> = ({ history }: any) => {\n\tconst [user, setUser] = useState(null)\n\tlet { token } = isAuthenticated()\n\tconst init = () => {\n\t\tgetUserDetails(token).then(data => {\n\t\t\tconsole.log('data: ', data)\n\t\t\tif (data.message === 'Invalid Authentification') {\n\t\t\t\talert('Session expired,  Please login')\n\t\t\t\tsignout(() => {\n\t\t\t\t\thistory.push('/')\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tsetUser(data.user)\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\tinit()\n\t}, [])\n\n\treturn (\n\t\t<>\n\t\t\t{user && !user.verified ? <Redirect to=\"/verify-email\" /> : null}\n\t\t\t{user && (\n\t\t\t\t<DashboardContainer>\n\t\t\t\t\t{user.role !== 'user' ? (\n\t\t\t\t\t\t<Redirect to=\"/admin/dashboard\" />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Title>Welcome, {user && user.email}</Title>\n\t\t\t\t\t\t\t<Link to=\"/submit-airdrop\" style={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Submit Airdrop</SubmitButton>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<Link to=\"/my-airdrops\" style={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"submit\">View your Airdrops</SubmitButton>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<Link to=\"/change/password\" style={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Change Password</SubmitButton>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer', width: '100%' }}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsignout(() => {\n\t\t\t\t\t\t\t\t\t\thistory.push('/')\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"submit\">Logout</SubmitButton>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</DashboardContainer>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default Dashboard\n","export const sendVerification = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/sendVerification`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const activate = (token, user) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/activate`, {\n\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(user)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const submitAirdrop = (token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/submit-airdrop`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const updateMyAirdrop = (id, token, airdrop) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/update/airdrop/${id}`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(airdrop)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const deleteMyAirdrop = (id, token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/delete/airdrop/${id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getMyAirdrops = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/my-airdrops`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n\nexport const getUserDetails = (token) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/me`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\nexport const updatePassword = (token, password) => {\n\n\treturn fetch(`${process.env.REACT_APP_BACKEND_API}/updatePassword`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify(password)\n\t})\n\t\t.then((response) => {\n\t\t\treturn response.json()\n\t\t})\n\t\t.catch((err) => console.log(err))\n}\n"],"sourceRoot":""}